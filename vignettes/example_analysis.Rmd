---
title: "example_analyis"
author: "System Insights"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{example_analyis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Introduction

In this vignette, we are going to do an example analysis with MTConnect Data to show
all the capabilities of the mtconnectR package

First let us define the raw data files that we are going to be working with. Two sets of 
example raw data and device XML files are provided along with the package

```{r}
require(mtconnectR)
file_path_adapter_log = "extdata/test_log_data_2.log"
file_path_xml = "extdata/test_devices_2.xml"
```

# Taking a quick look at the raw data

Before we read in the data into the MTC Device Class, it might help us a bit in understanding
a bit about the raw data items. Let's try to see how the Devices XML and the Raw data looks.

## Devices XML Data

### get_device_info_from_xml

The devices XML has information about the configuration of one or more devices. We can
check out the devices for which the info is present in the devices XML using the
`get_device_info_from_xml` function. From the device info, we can select the name of the 
device that we want to analyse further

```{r}
(device_info = get_device_info_from_xml(system.file(file_path_xml, package = "mtconnectR")))
device_name = device_info$name[1]
```

### get_xpaths_from_xml

The `get_xpath_from_xml` function can read in the xpath info for a single device into
a easily read data.frame format.

The data.frame contains the id and name of each data item and the xpath along with the 
type, category and subType of the data_item. It is easy to find out what are the data items
of a particular type using this function. For example, we are going to find out the conditions
data items which we will be using in the next step.

```{r}
xpath_info = get_xpaths_from_xml(system.file(file_path_xml, package = "mtconnectR"), device_name)
conditions_data_items = xpath_info$id[xpath_info$category == "CONDITION"]

```

## Adapter Log data

`read_adapter_log_file` function reads in all the data from the adapter log into a 
data.frame. It can optionally take in a conditions

```{r}
#file_path_adapter_log = "tests/dataExtraction/test_log_data.log"
#read_adapter_log_file(system.file(file_path_xml, package = "mtconnectR"), condition_names = conditions_data_items)
```

